<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.ex.TravelPhotoMapper">
	<insert id="insert" parameterType="TravelPhotoVO" useGeneratedKeys="true" keyProperty="bno">
	 <selectKey keyProperty="prid" resultType="int" order="BEFORE">
	    	SELECT NEXTVAL(seq_photoreview) FROM DUAL
	    </selectKey>
			INSERT INTO photoreview(prid,title, content, name) VALUES (#{prid}, #{title}, #{content}, #{name})			
	</insert>
	
	<select id="list" resultType="TravelPhotoVO">
		SELECT  prid,name,title,file,redate FROM photoreview ;
	</select>
	
	<select id="read" parameterType="int" resultType="TravelPhotoVO">
		SELECT	prid, title, content, name FROM photoreview WHERE prid = #{prid}
	</select>
	
	<insert id="insertFile" parameterType="hashMap">
		INSERT INTO photofile(file_no, prid, o_file_name, s_file_name, file_size)VALUES(NEXTVAL(seq_file_no), #{prid},#{o_file_name}, #{s_file_name}, #{file_size})
    </insert>
</mapper>